
@{
    ViewData["Title"] = "Add";
}
<script src="~/js/vue.js"></script>
<script src="~/js/axios.js"></script>
<script src="~/js/area.js"></script>
<script src="~/Scripts/jquery-3.3.1.js"></script>
<div class="info">
    <div id="app">
        <div id="show">
            <table class="table table-bordered">
                <tr>
                    <td>报修商品类型</td>
                    <td>
                        <select v-model="options" v-on:change="Drop2(options)" class="form-control">
                            <option v-for="(item,index) in Options" :key="index" :value="item.cId">{{item.cName}}</option>
                        </select>
                    </td>
                    <td>报修商品型号</td>
                    <td>
                        <select class="form-control">
                            <option v-for="(item,index) in Options1" :key="index" :value="item.cId">{{item.cName}}</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>报修原因</td>
                    <td>
                        <select id="bxyy" class="form-control">
                            <option>运输损坏</option>
                            <option>软件故障</option>
                            <option>硬件故障</option>
                            <option>过失损坏</option>
                            <option>  其他  </option>
                        </select>
                    </td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>报修理由</td>
                    <td><textarea id="bxly" rows="2" cols="20" class="form-control"></textarea></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>地址</td>
                    <td>
                        <select id="s_province" name="s_province" class="form-control"></select>
                    </td>
                    <td>
                        <select id="s_city" name="s_city" class="form-control"></select>
                    </td>
                    <td>
                        <select id="s_county" name="s_county" class="form-control"></select>
                    </td>
                </tr>
                <tr>
                    <td>详细地址</td>
                    <td><textarea id="xxdz" rows="2" cols="20" class="form-control"></textarea></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td colspan="4"><input id="Button1" v-on:click="Add" type="button" value="提交" class="btn btn-group" /></td>
                </tr>
            </table>
        </div>
    </div>
</div>



@section scripts{

    <script class="resources library" src="~/js/area.js" type="text/javascript"></script>
    <script type="text/javascript">_init_area();</script>
    <script type="text/javascript">

        var Gid = document.getElementById;

        var showArea = function () {

            document.getElementById('show').innerHTML = "<h3>省" + Gid('s_province').value + " - 市" +

                document.getElementById('s_city').value + " - 县/区" +

                document.getElementById('s_county').value + "</h3>"

        }
        document.getElementById('s_county').setAttribute('onchange', 'showArea()');
    </script>
    <script>
        var app = new Vue({
            el: "#app",
            data: {
                Options: "",
                options: "1",
                Options1: "",
                options1: "1",
            },
            mounted() {
                this.Drop1();
            },
            methods: {
                Drop1: function () {
                    var t = this;
                    axios
                        .get("@ViewBag.url/api/CommodityDetailstbGetType")
                        .then(function (i) {
                            t.Options = i.data;
                            t.Drop2(t.options);
                        })
                        //.then(reponseData => {
                        //    t.Options = reponseData.data;
                        //    this.Drop2(t.options);
                        //})
                        .catch(function (error) {
                            console.log(error);
                        })
                },
                Drop2: function (id) {
                    var t = this;
                    axios
                        .get("@ViewBag.url/api/CommodityDetailstbGetMarque?CId=" + id)
                        .then(function (i) {
                            t.Options1 = i.data;
                        })
                        .catch(function (error) {
                            console.log(error);
                        })
                },
                Add: function () {

                }
            }
        })
    </script>
}
